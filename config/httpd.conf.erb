# Security
ServerTokens OS
ServerSignature On
TraceEnable On

ServerRoot "/app/apache/etc/apache2"
PidFile run/httpd.pid
Timeout 120
KeepAlive Off
MaxKeepAliveRequests 100
KeepAliveTimeout 15
LimitRequestFieldSize 8190
DocumentRoot /app

User apache
Group apache

AccessFileName .htaccess
<FilesMatch "^\.ht">
    Require all denied
</FilesMatch>

<Directory />
  Options FollowSymLinks
  AllowOverride None
</Directory>

<Directory "/app">
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

HostnameLookups Off
ErrorLog "/app/apache/logs/error_log"
LogLevel warn
EnableSendfile On

Listen <%= ENV["PORT"] %>

LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"" forwarded